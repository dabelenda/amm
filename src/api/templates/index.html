<h1>Documentation AMM</h1>

<p>
    L'API REST AMM vous permet de créer une base de données MySQL à la demande.
</p>

<h2>Créer une clé d'API</h2>

<p>
    Pour pouvoir interagir avec l'API, vous devez d'abord créer une clé d'API à l'aide
    de la méthode suivante :
</p>

<table>
    <tr>
        <th>Méthode</th>
        <th>URL</th>
        <th>Paramètres</th>
    </tr>
    <tr>
        <td>POST</td>
        <td><a href="/v1/apikeys/">/v1/apikeys/</a></td>
        <td>
            <ul>
                <li><strong>username</strong> : votre username GASPAR</li>
                <li><strong>password</strong> : votre mot de passe GASPAR</li>
            </ul>
        </td>
    </tr>
</table>

<p>
    Exemple avec curl :
</p>

<pre>
  curl --data "username=foo&password=bar" {{ API_URL }}/v1/apikeys/
</pre>

<p>
    Vous recevez en retour votre clé au format JSON, par exemple :
</p>

<pre>
  {
    "access_key": "2975423afd3266a0aed61",
    "secret_key": "KgLGW4tfZQv42cZgV4zHcMWcTcsivkANe6Oj"
  }
</pre>
<h2>Créer un schéma</h2>

<p>
    Une fois votre clé d'API obtenue, vous pouvez l'utiliser pour créer un schéma :
</p>

<table>
    <tr>
        <th>Méthode</th>
        <th>URL</th>
        <th>Paramètres</th>
    </tr>
    <tr>
        <td>POST</td>
        <td><a href="/v1/schemas/">/v1/schemas/</a></td>
        <td>
            <ul>
                <li><strong>access_key</strong> : votre access key</li>
                <li><strong>secret_key</strong> : votre secret key</li>
                <li><strong>unit_id</strong> : l'id de l'unité rattachée à la base de donnée (facultatif si vous n'êtes membre que d'une unité)</li>
            </ul>
        </td>
    </tr>
</table>

<p>
    Exemple avec curl :
</p>

<pre>
  curl --data "access_key=2975423afd3266a0aed61&secret_key=KgLGW4tfZQv42cZgV4zHcMWcTcsivkANe6Oj" {{ API_URL }}/v1/schemas/
</pre>

<p>
  Vous recevez en retour les informations sur le schéma, par exemple :
</p>

<pre>
{
    "connection_string": "mysql://password@host.db.rsaas.epfl.ch:23670/schema",
    "mysql_cmd": "mysql -h host.db.rsaas.epfl.ch -uuser -ppassword -P 23670 schema",
    "unit_id": "13030",
    "schema_id": "d8buhm4de"
}
</pre>


<h2>Pour aller plus loin</h2>
<p>
    <a href="/v1/doc">Voir la documentation dynamique de l'API</a>
</p>